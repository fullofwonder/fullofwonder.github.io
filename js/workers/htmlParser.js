var id,self=this;function parse(e){var r,n=(e=e||{}).html,a=[];n.indexOf("<pre"),n.indexOf("<code"),n.indexOf("<script");a.push(/([< \/][^>]*?>)((\s*[^<\s]+\s+?)+)([^<\s]+\s*)(<)/g),r=/(>)([^<\n]*?[^<]+?)(<[^\/])/g;for(var s=0;s<a.length;s++){var t=a[s];n=n.replace(t,function(e,r){if(0<=r.indexOf('class="parsed"'))return e;if(0==r.indexOf("<pre"))return e;if(0==r.indexOf("<code"))return e;if(0==r.indexOf("<script"))return e;var n="",a=arguments[2].split(" ");""==a[a.length-1]&&a.splice(-1,1),a.push(arguments[4]);for(var s=0;s<a.length;s++){var t=s==a.length-1?"":" ";n+="<span>"+a[s]+t+"</span>"}return r+n+"<"})}r&&(n=n.replace(r,function(e,r){return arguments[2].trim()?r+("<span>"+arguments[2]+"</span>")+arguments[3]:e})),n=n.replace(/(<a [\s\S]*?)(>)/g,'$1 onclick="return false;" $2'),self.postMessage({data:n,id:id})}self.addEventListener("message",function(e){var r=e.data.func,n=e.data.params;id=e.data.id,self[r].apply(self,n)},!1);var log=console.log;function clone(e){if(null==e||"object"!=typeof e)return e;var r=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(r[n]=clone(e[n]));return r}